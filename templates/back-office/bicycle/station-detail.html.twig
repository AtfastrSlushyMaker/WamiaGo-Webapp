{% extends 'back-office/base.html.twig' %}

{% block title %}{{ station.name }} - Station Dashboard | WamiaGo{% endblock %}

{% block stylesheets %}
{{ parent() }}
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@2.32.0/tabler-icons.min.css">
<link rel="stylesheet" href="{{ asset('css/back/bicycle/station-detail.css') }}?v={{ 'now'|date('YmdHi') }}">
{% endblock %}

{% block content %}
<div class="container-fluid px-4">
    <!-- Station Dashboard Header -->
    <div class="station-header my-4">
        <div class="row g-0">
            <div class="col-12">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb mb-2">
                        <li class="breadcrumb-item"><a href="{{ path('admin_dashboard') }}"><i class="ti ti-home"></i> Dashboard</a></li>
                        <li class="breadcrumb-item"><a href="{{ path('admin_bicycle_dashboard', {'tab': 'stations'}) }}"><i class="ti ti-map-pin"></i> Stations</a></li>
                        <li class="breadcrumb-item active" aria-current="page">ST-{{ '%04d'|format(station.idStation) }}</li>
                    </ol>
                </nav>

                <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center">
                    <div class="d-flex align-items-center mb-3 mb-md-0">
                        <div class="station-avatar me-3 
                            {% if station.status.value == 'active' %}bg-success-subtle{% 
                            elseif station.status.value == 'maintenance' %}bg-warning-subtle{% 
                            else %}bg-secondary-subtle{% endif %}">
                            <i class="ti ti-map-pin-filled 
                                {% if station.status.value == 'active' %}text-success{% 
                                elseif station.status.value == 'maintenance' %}text-warning{% 
                                else %}text-secondary{% endif %}"></i>
                        </div>
                        <div>
                            <h1 class="h3 mb-0 fw-bold d-flex align-items-center">
                                {{ station.name }}
                                <span class="ms-2 status-badge 
                                    {% if station.status.value == 'active' %}status-available{% 
                                    elseif station.status.value == 'maintenance' %}status-maintenance{% 
                                    else %}status-inactive{% endif %}">
                                    <i class="ti ti-{% if station.status.value == 'active' %}check{% 
                                        elseif station.status.value == 'maintenance' %}tools{% 
                                        else %}circle-x{% endif %}"></i>
                                    {{ station.status.value|capitalize }}
                                </span>
                            </h1>
                            <p class="text-muted mb-0 d-flex align-items-center">
                                <span class="me-3"><i class="ti ti-id me-1"></i> ST-{{ '%04d'|format(station.idStation) }}</span>
                                <span><i class="ti ti-clock me-1"></i> Updated {{ 'now'|date('M d, Y H:i') }}</span>
                                {% if station.location %}
                                <a href="https://www.google.com/maps?q={{ station.location.latitude }},{{ station.location.longitude }}" 
                                   target="_blank" class="ms-3 text-primary" data-bs-toggle="tooltip" title="View on Google Maps">
                                    <i class="ti ti-external-link"></i>
                                </a>
                                {% endif %}
                            </p>
                        </div>
                    </div>

                    <div class="action-buttons">
                        <div class="btn-group shadow-sm">
                            <button class="btn btn-light" id="refreshStationBtn" data-bs-toggle="tooltip" title="Refresh Data">
                                <i class="ti ti-refresh"></i>
                            </button>
                            <a href="{{ path('admin_bicycle_dashboard', {'tab': 'stations'}) }}" class="btn btn-light">
                                <i class="ti ti-list"></i> All Stations
                            </a>
                            <button type="button" class="btn btn-primary station-edit-btn" data-station-id="{{ station.idStation }}">
                                <i class="ti ti-edit"></i> Edit Station
                            </button>
                            
                            <!-- Standard Bootstrap dropdown replacement -->
                            <div class="dropdown">
                                <button class="btn btn-light dropdown-toggle" type="button" id="stationActions" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="ti ti-dots-vertical"></i>
                                </button>
                                <ul class="dropdown-menu dropdown-menu-end shadow-sm">
                                    {% if station.status.value != 'maintenance' %}
                                    <li>
                                        <a class="dropdown-item" href="{{ path('admin_bicycle_station_maintenance', {'id': station.idStation}) }}">
                                            <i class="ti ti-tools text-warning me-2"></i> Set Maintenance
                                        </a>
                                    </li>
                                    {% else %}
                                    <li>
                                        <a class="dropdown-item" href="{{ path('admin_bicycle_station_activate', {'id': station.idStation}) }}">
                                            <i class="ti ti-check text-success me-2"></i> Activate Station
                                        </a>
                                    </li>
                                    {% endif %}
                                    <li><hr class="dropdown-divider"></li>
                                    <li>
                                        <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#printQRModal">
                                            <i class="ti ti-qrcode me-2"></i> Generate QR Code
                                        </a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#exportDataModal">
                                            <i class="ti ti-file-export me-2"></i> Export Station Data
                                        </a>
                                    </li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li>
                                        <a class="dropdown-item text-danger" href="#" data-bs-toggle="modal" data-bs-target="#deleteStationModal">
                                            <i class="ti ti-trash me-2"></i> Delete Station
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
<div class="modal fade" id="exportDataModal" tabindex="-1" aria-labelledby="exportDataModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exportDataModalLabel">
                    <i class="ti ti-file-export me-2 text-primary"></i> Export Station Data
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="mb-4">
                    <h6>Select data to export:</h6>
                    <div class="list-group">
                        <label class="list-group-item d-flex gap-2">
                            <input class="form-check-input flex-shrink-0" type="checkbox" value="station_info" checked>
                            <span>
                                Station Information
                                <small class="d-block text-muted">Basic station details and status</small>
                            </span>
                        </label>
                        <label class="list-group-item d-flex gap-2">
                            <input class="form-check-input flex-shrink-0" type="checkbox" value="bicycle_data" checked>
                            <span>
                                Bicycle Data 
                                <small class="d-block text-muted">Current bicycles assigned to this station</small>
                            </span>
                        </label>
                        <label class="list-group-item d-flex gap-2">
                            <input class="form-check-input flex-shrink-0" type="checkbox" value="rental_history" checked>
                            <span>
                                Rental History
                                <small class="d-block text-muted">Past rental activities from this station</small>
                            </span>
                        </label>
                        <label class="list-group-item d-flex gap-2">
                            <input class="form-check-input flex-shrink-0" type="checkbox" value="maintenance_log">
                            <span>
                                Maintenance Log
                                <small class="d-block text-muted">Station maintenance records</small>
                            </span>
                        </label>
                    </div>
                </div>
                
                <div class="mb-4">
                    <h6>Export format:</h6>
                    <div class="btn-group w-100" role="group">
                        <input type="radio" class="btn-check" name="exportFormat" id="exportCsv" value="csv" checked autocomplete="off">
                        <label class="btn btn-outline-primary" for="exportCsv">
                            <i class="ti ti-file-spreadsheet me-1"></i> CSV
                        </label>
                        
                        <input type="radio" class="btn-check" name="exportFormat" id="exportExcel" value="excel" autocomplete="off">
                        <label class="btn btn-outline-primary" for="exportExcel">
                            <i class="ti ti-file-spreadsheet me-1"></i> Excel
                        </label>
                        
                        <input type="radio" class="btn-check" name="exportFormat" id="exportJson" value="json" autocomplete="off">
                        <label class="btn btn-outline-primary" for="exportJson">
                            <i class="ti ti-code me-1"></i> JSON
                        </label>
                    </div>
                </div>
                
                <div class="mb-3">
                    <h6>Date range:</h6>
                    <div class="row g-2">
                        <div class="col">
                            <div class="input-group input-group-sm">
                                <span class="input-group-text">From</span>
                                <input type="date" class="form-control" id="dateFrom" 
                                       value="{{ 'now'|date_modify('-30 days')|date('Y-m-d') }}">
                            </div>
                        </div>
                        <div class="col">
                            <div class="input-group input-group-sm">
                                <span class="input-group-text">To</span>
                                <input type="date" class="form-control" id="dateTo" 
                                       value="{{ 'now'|date('Y-m-d') }}">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">
                    <i class="ti ti-download me-1"></i> Export Data
                </button>
            </div>
        </div>
    </div>
</div>
    <!-- Live Station Status & Key Metrics -->
    <div class="row g-4 mb-4">
        <!-- Animated status cards with enhanced visuals -->
        <div class="col-xl-3 col-md-6">
            <div class="card metric-card border-0 h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="metric-content">
                            <div class="metric-label">Available Bicycles</div>
                            <div class="metric-value d-flex align-items-center">
                                <span class="h2 mb-0 me-2">{{ station.availableBikes }}</span>
                                <div class="change-indicator">
                                    {% if station.availableBikes > 0 %}
                                        <span class="change-positive"><i class="ti ti-trending-up"></i></span>
                                    {% else %}
                                        <span class="change-negative"><i class="ti ti-trending-down"></i></span>
                                    {% endif %}
                                </div>
                            </div>
                            <div class="metric-info">
                                {% if station.totalDocks > 0 %}
                                    <div class="progress" style="height: 6px; width: 100px;">
                                        <div class="progress-bar bg-primary" 
                                             style="width: {{ (station.availableBikes / station.totalDocks * 100)|round }}%" 
                                             role="progressbar"></div>
                                    </div>
                                    <span class="small text-muted mt-1">{{ (station.availableBikes / station.totalDocks * 100)|number_format(1) }}% of capacity</span>
                                {% else %}
                                    <span class="small text-muted">No docks configured</span>
                                {% endif %}
                            </div>
                        </div>
                        <div class="metric-icon bg-primary-subtle text-primary pulse-animation">
                            <i class="ti ti-bike"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="card metric-card border-0 h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="metric-content">
                            <div class="metric-label">Available Docks</div>
                            <div class="metric-value d-flex align-items-center">
                                <span class="h2 mb-0 me-2">{{ station.availableDocks }}</span>
                                <div class="change-indicator">
                                    {% set dockChangeClass = station.availableDocks < (station.totalDocks * 0.2) ? 'change-negative' : 'change-neutral' %}
                                    <span class="{{ dockChangeClass }}">
                                        <i class="ti ti-{% if dockChangeClass == 'change-negative' %}alert-triangle{% else %}circle-check{% endif %}"></i>
                                    </span>
                                </div>
                            </div>
                            <div class="metric-info">
                                {% if station.totalDocks > 0 %}
                                    <div class="progress" style="height: 6px; width: 100px;">
                                        <div class="progress-bar bg-success" 
                                             style="width: {{ (station.availableDocks / station.totalDocks * 100)|round }}%" 
                                             role="progressbar"></div>
                                    </div>
                                    <span class="small text-muted mt-1">{{ (station.availableDocks / station.totalDocks * 100)|number_format(1) }}% available</span>
                                {% else %}
                                    <span class="small text-muted">No docks configured</span>
                                {% endif %}
                            </div>
                        </div>
                        <div class="metric-icon bg-success-subtle text-success">
                            <i class="ti ti-parking"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="card metric-card border-0 h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="metric-content">
                            <div class="metric-label">Charging Bikes</div>
                            <div class="metric-value d-flex align-items-center">
                                <span class="h2 mb-0 me-2">{{ station.chargingBikes }}</span>
                                <div class="change-indicator">
                                    <span class="change-neutral"><i class="ti ti-bolt"></i></span>
                                </div>
                            </div>
                            <div class="metric-info">
                                {% if station.totalDocks > 0 %}
                                    <div class="progress" style="height: 6px; width: 100px;">
                                        <div class="progress-bar bg-warning" 
                                             style="width: {{ (station.chargingBikes / station.totalDocks * 100)|round }}%" 
                                             role="progressbar"></div>
                                    </div>
                                    <span class="small text-muted mt-1">{{ (station.chargingBikes / station.totalDocks * 100)|number_format(1) }}% charging</span>
                                {% else %}
                                    <span class="small text-muted">No docks configured</span>
                                {% endif %}
                            </div>
                        </div>
                        <div class="metric-icon bg-warning-subtle text-warning">
                            <i class="ti ti-bolt-off"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6">
            <div class="card metric-card border-0 h-100">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="metric-content">
                            <div class="metric-label">Total Rentals</div>
                            <div class="metric-value d-flex align-items-center">
                                <span class="h2 mb-0 me-2">{{ statistics.totalRentals }}</span>
                                <div class="change-indicator">
                                    <span class="change-neutral"><i class="ti ti-chart-bar"></i></span>
                                </div>
                            </div>
                            <div class="metric-info">
                                <span class="badge bg-info-subtle text-info">
                                    <i class="ti ti-calendar"></i> All time
                                </span>
                                <span class="small text-muted ms-2">
                                    {% if statistics.weeklyRentals is defined %}
                                        {{ statistics.weeklyRentals }} this week
                                    {% endif %}
                                </span>
                            </div>
                        </div>
                        <div class="metric-icon bg-info-subtle text-info">
                            <i class="ti ti-receipt"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Map & Station Info -->
    <div class="row g-4 mb-4">
        <!-- Enhanced Interactive Map -->
        <div class="col-lg-8">
            <div class="card border-0 h-100">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0">
                        <i class="ti ti-map-2 me-2"></i> Station Location
                    </h5>
                    <div class="map-controls">
                        <div class="btn-group">
                            <button type="button" class="btn btn-sm btn-light active" id="mapNormalView">
                                <i class="ti ti-map"></i>
                            </button>
                            <button type="button" class="btn btn-sm btn-light" id="mapSatelliteView">
                                <i class="ti ti-photo"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card-body p-0">
                    {% if station.location %}
                        <div id="stationMap" 
     class="station-map"
     data-lat="{{ station.location.latitude|default(0) }}"
     data-lng="{{ station.location.longitude|default(0) }}"
     data-name="{{ station.name }}"
     data-available-bikes="{{ station.availableBikes }}"
     data-available-docks="{{ station.availableDocks }}"
     data-charging-bikes="{{ station.chargingBikes|default(0) }}"
     data-status="{{ station.status.value|capitalize }}">
</div>
                    {% else %}
                        <div class="no-data-placeholder d-flex flex-column align-items-center justify-content-center p-5">
                            <div class="placeholder-icon mb-3">
                                <i class="ti ti-map-off"></i>
                            </div>
                            <h5>No Location Data</h5>
                            <p class="text-muted mb-3">This station doesn't have location coordinates set.</p>
                            <a href="{{ path('admin_bicycle_station_edit', {'id': station.idStation}) }}" class="btn btn-sm btn-primary">
                                <i class="ti ti-plus me-1"></i> Add Location
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Enhanced Station Information & Analytics -->
        <div class="col-lg-4">
            <div class="card border-0 h-100">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0">
                        <i class="ti ti-info-circle me-2"></i> Station Information
                    </h5>
                    <div class="dropdown">
                        <button class="btn btn-sm btn-icon btn-light" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="ti ti-dots-vertical"></i>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li>
                                <a class="dropdown-item station-edit-btn" href="#" data-station-id="{{ station.idStation }}">
                                    <i class="ti ti-edit me-2"></i> Edit Information
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="#" id="copyStationInfo">
                                    <i class="ti ti-copy me-2"></i> Copy Details
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="card-body">
                    <div class="station-info-list">
                        <div class="info-item">
                            <div class="info-label"><i class="ti ti-id text-muted me-2"></i> ID</div>
                            <div class="info-value fw-medium">ST-{{ '%04d'|format(station.idStation) }}</div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label"><i class="ti ti-signature text-muted me-2"></i> Name</div>
                            <div class="info-value fw-medium">{{ station.name }}</div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label"><i class="ti ti-map-pin text-muted me-2"></i> Address</div>
                            <div class="info-value">
                                {% if station.location %}
                                    <span>{{ station.location.address }}</span>
                                {% else %}
                                    <span class="text-muted">No address set</span>
                                {% endif %}
                            </div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label"><i class="ti ti-stack-2 text-muted me-2"></i> Total Docks</div>
                            <div class="info-value fw-medium">{{ station.totalDocks }}</div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label"><i class="ti ti-battery-2 text-muted me-2"></i> Charging Capacity</div>
                            <div class="info-value fw-medium">{{ station.chargingBikes }} bikes</div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label"><i class="ti ti-chart-pie text-muted me-2"></i> Occupancy Rate</div>
                            <div class="info-value">
                                <div class="d-flex align-items-center">
                                    <div class="progress flex-grow-1 me-2" style="height: 6px;" aria-label="Occupancy rate">
                                        <div class="progress-bar 
                                            {% if statistics.occupancyRate > 70 %}bg-success{% 
                                            elseif statistics.occupancyRate > 30 %}bg-info{% 
                                            else %}bg-danger{% endif %}" 
                                            role="progressbar" 
                                            style="width: {{ statistics.occupancyRate }}%">
                                        </div>
                                    </div>
                                    <span class="fw-medium">{{ statistics.occupancyRate|number_format(1) }}%</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="info-item">
                            <div class="info-label"><i class="ti ti-activity text-muted me-2"></i> Status</div>
                            <div class="info-value">
                                <span class="status-badge 
                                    {% if station.status.value == 'active' %}status-available{% 
                                    elseif station.status.value == 'maintenance' %}status-maintenance{% 
                                    else %}status-inactive{% endif %}">
                                    <i class="ti ti-{% if station.status.value == 'active' %}check-circle{% 
                                        elseif station.status.value == 'maintenance' %}tools{% 
                                        else %}circle-x{% endif %}"></i>
                                    {{ station.status.value|replace({'_': ' '})|capitalize }}
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <hr class="my-4">
                    
                    <div class="station-analytics">
                        <h6 class="mb-3 text-muted">Station Analytics</h6>
                        
                        <div class="analytics-item mb-3">
                            <div class="d-flex justify-content-between mb-2">
                                <span>Peak Usage Hours</span>
                                <span class="fw-medium">4pm - 6pm</span>
                            </div>
                            <div class="mini-chart">
                                <div class="chart-bar" style="height: 10px;"></div>
                                <div class="chart-bar" style="height: 15px;"></div>
                                <div class="chart-bar" style="height: 20px;"></div>
                                <div class="chart-bar" style="height: 30px;"></div>
                                <div class="chart-bar" style="height: 45px;"></div>
                                <div class="chart-bar" style="height: 35px;"></div>
                                <div class="chart-bar" style="height: 25px;"></div>
                                <div class="chart-bar" style="height: 15px;"></div>
                            </div>
                        </div>
                        
                        <div class="analytics-item">
                            <div class="d-flex justify-content-between mb-2">
                                <span>Average Usage Time</span>
                                <span class="fw-medium">24 min</span>
                            </div>
                            <div class="d-flex align-items-center">
                                <div class="progress flex-grow-1 me-2" style="height: 6px;">
                                    <div class="progress-bar bg-primary" style="width: 65%" role="progressbar"></div>
                                </div>
                                <span class="small text-muted">24 min</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bicycles Management Tab Section -->
    <div class="card border-0 mb-4">
        <div class="card-header bg-transparent">
            <ul class="nav nav-tabs card-header-tabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="bicycles-tab" data-bs-toggle="tab" data-bs-target="#bicycles" type="button" role="tab" aria-controls="bicycles" aria-selected="true">
                        <i class="ti ti-bike me-2"></i>
                        Bicycles
                        <span class="badge bg-primary-subtle text-primary rounded-pill ms-1">{{ bicycles|length }}</span>
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="rentals-tab" data-bs-toggle="tab" data-bs-target="#rentals" type="button" role="tab" aria-controls="rentals" aria-selected="false">
                        <i class="ti ti-history me-2"></i>
                        Rental Activity
                        <span class="badge bg-secondary-subtle text-secondary rounded-pill ms-1">{{ rentals|length }}</span>
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="maintenance-tab" data-bs-toggle="tab" data-bs-target="#maintenance" type="button" role="tab" aria-controls="maintenance" aria-selected="false">
                        <i class="ti ti-tools me-2"></i>
                        Maintenance Log
                    </button>
                </li>
            </ul>
        </div>
        
        <div class="tab-content">
            <!-- Bicycles Tab -->
            <div class="tab-pane fade show active" id="bicycles" role="tabpanel" aria-labelledby="bicycles-tab">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <div class="d-flex align-items-center">
                            <div class="input-group input-group-merge me-2" style="width: 250px;">
                                <span class="input-group-text border-end-0 bg-transparent">
                                    <i class="ti ti-search text-muted"></i>
                                </span>
                                <input type="text" id="bicycleSearch" class="form-control border-start-0" placeholder="Search bicycles...">
                            </div>
                            
                            <div class="dropdown me-2">
                                <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="ti ti-filter me-1"></i> Filter
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#"><i class="ti ti-list text-muted me-2"></i>All Bicycles</a></li>
                                    <li><a class="dropdown-item" href="#"><i class="ti ti-check text-success me-2"></i>Available</a></li>
                                    <li><a class="dropdown-item" href="#"><i class="ti ti-tools text-warning me-2"></i>In Maintenance</a></li>
                                    <li><a class="dropdown-item" href="#"><i class="ti ti-bolt text-primary me-2"></i>Charging</a></li>
                                </ul>
                            </div>
                            
                            <button type="button" class="btn btn-outline-secondary" id="refreshBicycles">
                                <i class="ti ti-refresh me-1"></i> Refresh
                            </button>
                        </div>
                        
                        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addBicycleModal">
                            <i class="ti ti-plus me-1"></i> Add Bicycle
                        </button>
                    </div>
                    
                    {% if bicycles|length > 0 %}
                        <div class="table-responsive">
                            <table class="table table-hover align-middle bicycle-table" id="bicyclesTable">
                                <thead>
                                    <tr>
                                        <th scope="col">ID</th>
                                        <th scope="col">Type</th>
                                        <th scope="col">Battery</th>
                                        <th scope="col">Range</th>
                                        <th scope="col">Status</th>
                                        <th scope="col" class="text-center">Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for bicycle in bicycles %}
                                    <tr>
                                        <td>
                                            <span class="fw-semibold">BIKE-{{ '%04d'|format(bicycle.idBike) }}</span>
                                        </td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="bicycle-type-icon me-2 {% if bicycle.batteryLevel > 90 %}bg-primary-subtle text-primary{% else %}bg-secondary-subtle text-secondary{% endif %}">
                                                    <i class="ti ti-bike"></i>
                                                </div>
                                                <span>{% if bicycle.batteryLevel > 90 %}Premium E-Bike{% else %}Standard E-Bike{% endif %}</span>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="battery-indicator me-2" role="progressbar" aria-label="Battery level">
                                                    <div class="battery-level 
                                                        {% if bicycle.batteryLevel > 70 %}bg-success{% 
                                                        elseif bicycle.batteryLevel > 30 %}bg-warning{% 
                                                        else %}bg-danger{% endif %}" 
                                                        style="width: {{ bicycle.batteryLevel }}%">
                                                    </div>
                                                </div>
                                                <div class="battery-text">
                                                    <span class="fw-medium">{{ bicycle.batteryLevel }}%</span>
                                                    {% if bicycle.batteryLevel < 20 %}
                                                    <i class="ti ti-alert-triangle text-danger ms-1" data-bs-toggle="tooltip" title="Low battery"></i>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <i class="ti ti-route text-info me-2"></i>
                                                <span>{{ bicycle.rangeKm }} km</span>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="status-badge 
                                                {% if bicycle.status.value == 'available' %}status-available{% 
                                                elseif bicycle.status.value == 'in_use' %}status-in-use{% 
                                                elseif bicycle.status.value == 'maintenance' %}status-maintenance{% 
                                                elseif bicycle.status.value == 'charging' %}status-charging{% 
                                                else %}status-inactive{% endif %}">
                                                <i class="ti ti-{% if bicycle.status.value == 'available' %}check{% 
                                                    elseif bicycle.status.value == 'in_use' %}map-pin{% 
                                                    elseif bicycle.status.value == 'maintenance' %}tools{% 
                                                    elseif bicycle.status.value == 'charging' %}bolt{% 
                                                    else %}circle-x{% endif %}"></i>
                                                {{ bicycle.status.value|replace({'_': ' '})|capitalize }}
                                            </span>
                                        </td>
                                        <td>
                                            <div class="d-flex justify-content-center">
                                                <button type="button" class="btn btn-sm btn-icon btn-outline-primary me-1" 
                                                        data-bs-toggle="tooltip" title="View Details">
                                                    <i class="ti ti-eye"></i>
                                                </button>
                                                <button type="button" class="btn btn-sm btn-icon btn-outline-secondary me-1" 
                                                        data-bs-toggle="tooltip" title="Edit Bicycle">
                                                    <i class="ti ti-edit"></i>
                                                </button>
                                                
                                                <!-- Standard Bootstrap dropdown -->
                                                <div class="dropdown">
                                                    <button class="btn btn-sm btn-icon btn-outline-secondary dropdown-toggle" 
                                                            type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                                        <i class="ti ti-dots-vertical"></i>
                                                    </button>
                                                    <ul class="dropdown-menu dropdown-menu-end">
                                                        {% if bicycle.status.value != 'maintenance' %}
                                                        <li>
                                                            <a class="dropdown-item" href="#">
                                                                <i class="ti ti-tools text-warning me-2"></i> Mark Maintenance
                                                            </a>
                                                        </li>
                                                        {% else %}
                                                        <li>
                                                            <a class="dropdown-item" href="#">
                                                                <i class="ti ti-check text-success me-2"></i> Mark Available
                                                            </a>
                                                        </li>
                                                        {% endif %}
                                                        <li>
                                                            <a class="dropdown-item" href="#">
                                                                <i class="ti ti-history me-2"></i> Rental History
                                                            </a>
                                                        </li>
                                                        <li><hr class="dropdown-divider"></li>
                                                        <li>
                                                            <a class="dropdown-item text-danger" href="#">
                                                                <i class="ti ti-trash me-2"></i> Remove from Station
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% else %}
                        <div class="no-data-placeholder d-flex flex-column align-items-center justify-content-center p-5">
                            <div class="placeholder-icon mb-3">
                                <i class="ti ti-bike-off"></i>
                            </div>
                            <h5>No Bicycles at this Station</h5>
                            <p class="text-muted mb-3">There are currently no bicycles assigned to this station.</p>
                            <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addBicycleModal">
                                <i class="ti ti-plus me-2"></i> Add Bicycle
                            </button>
                        </div>
                    {% endif %}
                </div>
            </div>
            
            <!-- Rentals Tab -->
            <div class="tab-pane fade" id="rentals" role="tabpanel" aria-labelledby="rentals-tab">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <div class="d-flex align-items-center">
                            <div class="input-group input-group-merge me-2" style="width: 250px;">
                                <span class="input-group-text border-end-0 bg-transparent">
                                    <i class="ti ti-search text-muted"></i>
                                </span>
                                <input type="text" id="rentalSearch" class="form-control border-start-0" placeholder="Search rentals...">
                            </div>
                            
                            <div class="dropdown me-2">
                                <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    <i class="ti ti-calendar me-1"></i> Time Period
                                </button>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="#"><i class="ti ti-calendar-stats text-muted me-2"></i>All Time</a></li>
                                    <li><a class="dropdown-item" href="#"><i class="ti ti-calendar-event text-muted me-2"></i>Today</a></li>
                                    <li><a class="dropdown-item" href="#"><i class="ti ti-calendar-week text-muted me-2"></i>This Week</a></li>
                                    <li><a class="dropdown-item" href="#"><i class="ti ti-calendar-month text-muted me-2"></i>This Month</a></li>
                                </ul>
                            </div>
                        </div>
                        
                        <button type="button" class="btn btn-outline-primary" id="exportRentals">
                            <i class="ti ti-download me-1"></i> Export
                        </button>
                    </div>
                    
                    
                    {% if rentals|length > 0 %}
                        <div class="table-responsive">
                            <table class="table table-hover align-middle" id="rentalsTable">
                                <thead>
                                    <tr>
                                        <th scope="col">ID</th>
                                        <th scope="col">User</th>
                                        <th scope="col">Bicycle</th>
                                        <th scope="col">Start Time</th>
                                        <th scope="col">End Time</th>
                                        <th scope="col">Duration</th>
                                        <th scope="col">Status</th>
                                        <th scope="col" class="text-center">Details</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for rental in rentals|slice(0, 10) %}
                                    <tr>
                                        <td><span class="fw-semibold">BR-{{ '%05d'|format(rental.idUserRental) }}</span></td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="avatar avatar-sm me-2 bg-primary-subtle text-primary">
                                                    <span>{{ rental.user ? rental.user.getName()|slice(0, 1)|upper : 'U' }}</span>
                                                </div>
                                                <span>{{ rental.user ? rental.user.getName() : 'Unknown User' }}</span>
                                            </div>
                                        </td>
                                        <td><span class="fw-medium">BIKE-{{ '%04d'|format(rental.bicycle.idBike) }}</span></td>
                                        <td>
                                            <div class="d-flex flex-column">
                                                <span class="fw-medium">{{ rental.startTime|date('M d, Y') }}</span>
                                                <small class="text-muted">{{ rental.startTime|date('H:i') }}</small>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="d-flex flex-column">
                                                {% if rental.endTime %}
                                                    <span class="fw-medium">{{ rental.endTime|date('M d, Y') }}</span>
                                                    <small class="text-muted">{{ rental.endTime|date('H:i') }}</small>
                                                {% else %}
                                                    <span class="text-muted">In progress</span>
                                                {% endif %}
                                            </div>
                                        </td>
                                        <td>
                                            {% if rental.endTime %}
                                                {% set duration = date(rental.endTime).diff(date(rental.startTime)) %}
                                                {% set hours = duration.h + (duration.days * 24) %}
                                                {% set minutes = duration.i %}
                                                <span class="fw-medium">{{ hours }}h {{ minutes }}m</span>
                                            {% else %}
                                                {% set duration = date('now').diff(date(rental.startTime)) %}
                                                {% set hours = duration.h + (duration.days * 24) %}
                                                {% set minutes = duration.i %}
                                                <span class="text-primary">{{ hours }}h {{ minutes }}m <i class="ti ti-player-play ms-1"></i></span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            <span class="status-badge {% if rental.endTime %}status-completed{% else %}status-active{% endif %}">
                                                <i class="ti ti-{% if rental.endTime %}check{% else %}clock{% endif %}"></i>
                                                {{ rental.endTime ? 'Completed' : 'Active' }}
                                            </span>
                                        </td>
                                        <td class="text-center">
                                            <button type="button" class="btn btn-sm btn-icon btn-outline-secondary"
                                                    data-bs-toggle="tooltip" title="View Details">
                                                <i class="ti ti-eye"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        
                        {% if rentals|length > 10 %}
                        <div class="text-center mt-3">
                            <a href="#" class="btn btn-outline-primary">
                                <i class="ti ti-list me-1"></i> View All {{ rentals|length }} Records
                            </a>
                        </div>
                        {% endif %}
                    {% else %}
                        <div class="no-data-placeholder d-flex flex-column align-items-center justify-content-center p-5">
                            <div class="placeholder-icon mb-3">
                                <i class="ti ti-clipboard"></i>
                            </div>
                            <h5>No Rental Activity</h5>
                            <p class="text-muted mb-3">There have been no rentals from this station yet.</p>
                        </div>
                    {% endif %}
                </div>
            </div>
            
            <!-- Maintenance Tab -->
            <div class="tab-pane fade" id="maintenance" role="tabpanel" aria-labelledby="maintenance-tab">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h6 class="card-title mb-0">Station Maintenance Log</h6>
                        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#logMaintenanceModal">
                            <i class="ti ti-plus me-1"></i> Log Activity
                        </button>
                    </div>
                    
                    <div class="maintenance-timeline">
                        <div class="timeline-item">
                            <div class="timeline-item-marker">
                                <div class="timeline-item-marker-indicator bg-primary">
                                    <i class="ti ti-check text-white"></i>
                                </div>
                            </div>
                            <div class="timeline-item-content">
                                <div class="d-flex justify-content-between align-items-start mb-1">
                                    <div>
                                        <span class="fw-bold">Routine Inspection</span>
                                        <span class="badge bg-success-subtle text-success ms-2">Completed</span>
                                    </div>
                                    <div class="text-muted small">April 2, 2025</div>
                                </div>
                                <p class="mb-2 text-muted">Regular maintenance check of all docks and charging systems. All systems operational.</p>
                                <div class="small">
                                    <span class="fw-medium">Technician:</span> 
                                    <span>Thomas Reynolds</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="timeline-item">
                            <div class="timeline-item-marker">
                                <div class="timeline-item-marker-indicator bg-warning">
                                    <i class="ti ti-tools text-white"></i>
                                </div>
                            </div>
                            <div class="timeline-item-content">
                                <div class="d-flex justify-content-between align-items-start mb-1">
                                    <div>
                                        <span class="fw-bold">Charging System Repair</span>
                                        <span class="badge bg-warning-subtle text-warning ms-2">Maintenance</span>
                                    </div>
                                    <div class="text-muted small">March 15, 2025</div>
                                </div>
                                <p class="mb-2 text-muted">Replaced faulty charging connectors on docks #3 and #4. Tested with bicycles and confirmed working.</p>
                                <div class="small">
                                    <span class="fw-medium">Technician:</span> 
                                    <span>Sarah Johnson</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="timeline-item">
                            <div class="timeline-item-marker">
                                <div class="timeline-item-marker-indicator bg-info">
                                    <i class="ti ti-refresh text-white"></i>
                                </div>
                            </div>
                            <div class="timeline-item-content">
                                <div class="d-flex justify-content-between align-items-start mb-1">
                                    <div>
                                        <span class="fw-bold">Software Update</span>
                                        <span class="badge bg-info-subtle text-info ms-2">Upgrade</span>
                                    </div>
                                    <div class="text-muted small">February 28, 2025</div>
                                </div>
                                <p class="mb-2 text-muted">Updated station kiosk software to version 2.4.1. Enhanced security and improved user interface.</p>
                                <div class="small">
                                    <span class="fw-medium">Technician:</span> 
                                    <span>Alex Mercer</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="timeline-item">
                            <div class="timeline-item-marker">
                                <div class="timeline-item-marker-indicator bg-danger">
                                    <i class="ti ti-alert-triangle text-white"></i>
                                </div>
                            </div>
                            <div class="timeline-item-content">
                                <div class="d-flex justify-content-between align-items-start mb-1">
                                    <div>
                                        <span class="fw-bold">Emergency Repair</span>
                                        <span class="badge bg-danger-subtle text-danger ms-2">Urgent</span>
                                    </div>
                                    <div class="text-muted small">January 12, 2025</div>
                                </div>
                                <p class="mb-2 text-muted">Power outage caused system failure. Reset circuit breakers and restored operations. All docks tested and verified.</p>
                                <div class="small">
                                    <span class="fw-medium">Technician:</span> 
                                    <span>Marcus Wilson</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Add Bicycle Modal -->
<div class="modal fade" id="addBicycleModal" tabindex="-1" aria-labelledby="addBicycleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="addBicycleModalLabel">
                    <i class="ti ti-bike me-2 text-primary"></i> Add Bicycle to Station
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form action="{{ path('admin_bicycle_add') }}" method="post" id="addBicycleForm">
                <div class="modal-body">
                    <input type="hidden" name="stationId" value="{{ station.idStation }}">
                    
                    <div class="mb-4">
                        <div class="bicycle-type-selector d-flex">
                            <div class="bicycle-type-option flex-grow-1 me-2" data-value="standard">
                                <input type="radio" name="bicycleType" id="typeStandard" value="standard" class="bicycle-type-input" checked>
                                <label for="typeStandard" class="bicycle-type-label">
                                    <div class="bicycle-icon">
                                        <i class="ti ti-bike"></i>
                                    </div>
                                    <div class="bicycle-info">
                                        <span class="bicycle-name">Standard E-Bike</span>
                                        <span class="bicycle-desc">Regular city e-bike</span>
                                    </div>
                                </label>
                            </div>
                            
                            <div class="bicycle-type-option flex-grow-1" data-value="premium">
                                <input type="radio" name="bicycleType" id="typePremium" value="premium" class="bicycle-type-input">
                                <label for="typePremium" class="bicycle-type-label">
                                    <div class="bicycle-icon premium">
                                        <i class="ti ti-bike"></i>
                                    </div>
                                    <div class="bicycle-info">
                                        <span class="bicycle-name">Premium E-Bike</span>
                                        <span class="bicycle-desc">Enhanced range & comfort</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row g-3 mb-3">
                        <div class="col-md-6">
                            <label for="batteryLevel" class="form-label">Battery Level</label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="batteryLevel" name="batteryLevel" 
                                       min="0" max="100" value="85" required>
                                <span class="input-group-text"><i class="ti ti-battery"></i></span>
                            </div>
                            <div class="form-text">Initial battery percentage</div>
                        </div>
                        
                        <div class="col-md-6">
                            <label for="rangeKm" class="form-label">Range (km)</label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="rangeKm" name="rangeKm" 
                                       min="0" value="50" required>
                                <span class="input-group-text">km</span>
                            </div>
                            <div class="form-text">Maximum travel distance</div>
                        </div>
                    </div>
                    
                    <div class="form-check form-switch mb-3">
                        <input class="form-check-input" type="checkbox" id="setToCharging" name="setToCharging">
                        <label class="form-check-label" for="setToCharging">Set bike to charging state</label>
                    </div>
                    
                    <div class="alert alert-info d-flex align-items-center small">
                        <i class="ti ti-info-circle me-2"></i>
                        <div>
                            Premium E-Bikes have enhanced battery capacity and range.
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="ti ti-plus me-1"></i> Add Bicycle
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Log Maintenance Modal -->
<div class="modal fade" id="logMaintenanceModal" tabindex="-1" aria-labelledby="logMaintenanceModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="logMaintenanceModalLabel">
                    <i class="ti ti-tool me-2 text-primary"></i> Log Maintenance Activity
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form action="#" method="post">
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="maintenanceType" class="form-label">Activity Type</label>
                        <select class="form-select" id="maintenanceType" name="maintenanceType" required>
                            <option value="" selected disabled>Select type...</option>
                            <option value="routine">Routine Inspection</option>
                            <option value="repair">Repair</option>
                            <option value="upgrade">System Upgrade</option>
                            <option value="emergency">Emergency Fix</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label for="maintenanceDescription" class="form-label">Description</label>
                        <textarea class="form-control" id="maintenanceDescription" name="description" rows="3" required
                                  placeholder="Describe the maintenance activity performed..."></textarea>
                    </div>
                    
                    <div class="row g-3 mb-3">
                        <div class="col-md-6">
                            <label for="technicianName" class="form-label">Technician Name</label>
                            <input type="text" class="form-control" id="technicianName" name="technicianName" required>
                        </div>
                        
                        <div class="col-md-6">
                            <label for="maintenanceDate" class="form-label">Date</label>
                            <input type="date" class="form-control" id="maintenanceDate" name="date" 
                                   value="{{ 'now'|date('Y-m-d') }}" required>
                        </div>
                    </div>
                    
                    <div class="form-check mb-3">
                        <input class="form-check-input" type="checkbox" id="notifyManagement" name="notifyManagement">
                        <label class="form-check-label" for="notifyManagement">
                            Notify management
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="ti ti-device-floppy me-1"></i> Save Record
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- QR Code Modal -->
<div class="modal fade" id="printQRModal" tabindex="-1" aria-labelledby="printQRModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="printQRModalLabel">
                    <i class="ti ti-qrcode me-2 text-primary"></i> Station QR Code
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body text-center">
                <div class="qr-code-container mb-3">
                    <div class="station-qr-placeholder">
                        <i class="ti ti-qrcode"></i>
                    </div>
                </div>
                
                <h6>{{ station.name }}</h6>
                <p class="text-muted">ST-{{ '%04d'|format(station.idStation) }}</p>
                
                <div class="alert alert-info d-flex" role="alert">
                    <i class="ti ti-info-circle me-2 flex-shrink-0"></i>
                    <div>
                        This QR code can be printed and displayed at the station for quick access to rental information.
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">
                    <i class="ti ti-printer me-1"></i> Print QR Code
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Delete Station Modal -->
<div class="modal fade" id="deleteStationModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Confirm Station Deletion</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="text-center mb-4">
                    <div class="modal-icon text-danger mb-3">
                        <i class="ti ti-alert-triangle"></i>
                    </div>
                    <h4>Are you sure?</h4>
                    <p class="text-muted">
                        You are about to delete station <strong>{{ station.name }}</strong>. This action cannot be undone.
                    </p>
                </div>
                
                <div class="alert alert-warning">
                    <div class="d-flex">
                        <i class="ti ti-alert-circle me-2"></i>
                        <div>
                            <strong>Warning:</strong> This will remove all associated data including bicycle assignments and rental records.
                        </div>
                    </div>
                </div>
                
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="confirmDelete" required>
                    <label class="form-check-label" for="confirmDelete">
                        I understand that this action is permanent
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="deleteStationBtn" disabled>
                    <i class="ti ti-trash me-1"></i> Delete Station
                </button>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="{{ asset('js/back/bicycle/station-detail.js') }}?v={{ 'now'|date('YmdHi') }}"></script>
    <script>
        // Simple dropdown fix that won't conflict with Bootstrap's built-in functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Make table-responsive overflow visible to allow dropdowns
            document.querySelectorAll('.table-responsive').forEach(table => {
                table.style.overflow = 'visible';
            });
        });
    </script>
{% endblock %}