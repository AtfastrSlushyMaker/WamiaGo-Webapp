{# Change Email Modal #}
<div class="modal fade" id="changeEmailModal" tabindex="-1" aria-labelledby="changeEmailModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="changeEmailModalLabel">Change Email Address</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="changeEmailForm" action="" method="post">
                    <div class="mb-3">
                        <label for="currentEmail" class="form-label">Current Email</label>
                        <input type="email" class="form-control" id="currentEmail" value="{{ user.email }}" disabled>
                    </div>
                    <div class="mb-3">
                        <label for="newEmail" class="form-label">New Email</label>
                        <input type="email" class="form-control" id="newEmail" name="newEmail" required>
                    </div>
                    <div class="mb-3">
                        <label for="confirmPassword" class="form-label">Current Password</label>
                        <input type="password" class="form-control" id="confirmPassword" name="confirmPassword" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" form="changeEmailForm" class="btn btn-primary">Update Email</button>
            </div>
        </div>
    </div>
</div>

{# Change Phone Modal #}
<div class="modal fade" id="changePhoneModal" tabindex="-1" aria-labelledby="changePhoneModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="changePhoneModalLabel">Update Phone Number</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="changePhoneForm" action="" method="post">
                    <div class="mb-3">
                        <label for="currentPhone" class="form-label">Current Phone Number</label>
                        <input type="tel" class="form-control" id="currentPhone" value="{{ user.phoneNumber }}" disabled>
                    </div>
                    <div class="mb-3">
                        <label for="newPhone" class="form-label">New Phone Number</label>
                        <input type="tel" class="form-control" id="newPhone" name="newPhone" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" form="changePhoneForm" class="btn btn-primary">Update Phone</button>
            </div>
        </div>
    </div>
</div>

{# Change Password Modal #}
<div class="modal fade" id="changePasswordModal" tabindex="-1" aria-labelledby="changePasswordModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="changePasswordModalLabel">Change Password</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="changePasswordForm" action="" method="post">
                    <div class="mb-3">
                        <label for="currentPassword" class="form-label">Current Password</label>
                        <input type="password" class="form-control" id="currentPassword" name="currentPassword" required>
                    </div>
                    <div class="mb-3">
                        <label for="newPassword" class="form-label">New Password</label>
                        <input type="password" class="form-control" id="newPassword" name="newPassword" required>
                        <div class="progress mt-2" style="height: 5px;">
                            <div class="progress-bar" role="progressbar" style="width: 0%;" id="passwordStrength"></div>
                        </div>
                        <small class="form-text text-muted">Use at least 8 characters with letters, numbers, and symbols.</small>
                    </div>
                    <div class="mb-3">
                        <label for="confirmNewPassword" class="form-label">Confirm New Password</label>
                        <input type="password" class="form-control" id="confirmNewPassword" name="confirmNewPassword" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" form="changePasswordForm" class="btn btn-primary">Update Password</button>
            </div>
        </div>
    </div>
</div>

{# Add Password Strength JavaScript #}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const passwordInput = document.getElementById('newPassword');
    const passwordStrength = document.getElementById('passwordStrength');
    
    if (passwordInput && passwordStrength) {
        passwordInput.addEventListener('input', function() {
            const password = this.value;
            let strength = 0;
            
            // Length check
            if (password.length >= 8) strength += 20;
            
            // Lowercase letters check
            if (/[a-z]/.test(password)) strength += 20;
            
            // Uppercase letters check
            if (/[A-Z]/.test(password)) strength += 20;
            
            // Numbers check
            if (/[0-9]/.test(password)) strength += 20;
            
            // Special chars check
            if (/[^A-Za-z0-9]/.test(password)) strength += 20;
            
            // Update UI
            passwordStrength.style.width = strength + '%';
            
            // Set color based on strength
            if (strength < 40) {
                passwordStrength.className = 'progress-bar bg-danger';
            } else if (strength < 80) {
                passwordStrength.className = 'progress-bar bg-warning';
            } else {
                passwordStrength.className = 'progress-bar bg-success';
            }
        });
    }
});
</script>
