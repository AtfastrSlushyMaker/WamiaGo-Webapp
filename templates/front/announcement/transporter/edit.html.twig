{% extends 'front/base.html.twig' %}

{% block title %}Edit Announcement | WamiaGo{% endblock %}

{% block page_stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/front/announcement/transporter-create-announcement.css') }}">
    <link rel="stylesheet" href="{{ asset('css/front/announcement/modal-details.css') }}">
{% endblock %}

{% block content %}
<div class="edit-announcement-container">
    <div class="card edit-card">
        <div class="card-header bg-gradient-primary text-white">
            <h2><i class="fas fa-edit me-2"></i>Edit Transport Announcement</h2>
        </div>
        
        <div class="card-body">
            {{ form_start(form, {'attr': {'id': 'edit-announcement-form', 'class': 'announcement-form'}}) }}
                <div class="form-card">
                    <!-- Title Field -->
                    <div class="form-group floating-label">
                        {{ form_widget(form.title, {'attr': {
                            'class': 'form-control' ~ (form.title.vars.valid ? '' : ' is-invalid'),
                            'placeholder': ' '
                        }}) }}
                        {{ form_label(form.title) }}
                        <div class="invalid-feedback">{{ form_errors(form.title)|striptags }}</div>
                    </div>

                    <!-- Content Field -->
                    <div class="form-group floating-label">
                        {{ form_widget(form.content, {'attr': {
                            'class': 'form-control' ~ (form.content.vars.valid ? '' : ' is-invalid'),
                            'placeholder': ' ',
                            'rows': 6
                        }}) }}
                        {{ form_label(form.content) }}
                        <div class="invalid-feedback">{{ form_errors(form.content)|striptags }}</div>
                    </div>

                    <!-- Zone and Status Fields -->
                    <div class="form-row">
                        <div class="form-group col-md-6 floating-label">
                            {{ form_widget(form.zone, {'attr': {
                                'class': 'form-select' ~ (form.zone.vars.valid ? '' : ' is-invalid')
                            }}) }}
                            {{ form_label(form.zone) }}
                            <div class="invalid-feedback">{{ form_errors(form.zone)|striptags }}</div>
                        </div>

                        <div class="form-group col-md-6">
                            <div class="form-check form-switch">
                                {{ form_widget(form.status, {'attr': {
                                    'class': 'form-check-input',
                                    'role': 'switch'
                                }}) }}
                                {{ form_label(form.status, null, {
                                    'label_attr': {'class': 'form-check-label'}
                                }) }}
                            </div>
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-lg btn-3d">
                            <i class="fas fa-save me-2"></i>Update Announcement
                        </button>
                        <a href="{{ path('app_transporter_announcement_list') }}" class="btn btn-outline-secondary btn-lg btn-3d">
                            <i class="fas fa-times me-2"></i>Cancel
                        </a>
                    </div>
                </div>
            {{ form_end(form) }}
        </div>
    </div>
</div>
{% endblock %}

{% block page_javascripts %}
    <script src="{{ asset('js/front/announcement/transporter-announcement.js') }}"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialiser VanillaTilt pour les effets 3D
        if (typeof VanillaTilt !== 'undefined') {
            VanillaTilt.init(document.querySelectorAll("[data-3d]"), {
                max: 5,
                speed: 400,
                glare: true,
                "max-glare": 0.2,
            });
        }
    });
    </script>
{% endblock %}